<div class="content">
	<div class="page-header">
		<div class="container">
			<h1>Create a Map</h1>
		</div>
	</div>
	<div class="container" style="margin-top: 24px;">
		<div class="row">
			<div class="col-md-6">
				<form role="form">
					<div class="form-group">
						<label for="headline">Title</label>
						<input ng-model="map.headline" name="headline" type="text" class="form-control" id="headline" placeholder="What's the title for this map?" required>
					</div>
					<div class="form-group">
						<label for="subtitle">Subtitle</label>
						<input ng-model="map.subtitle" name="subtitle" type="text" class="form-control" id="subtitle" placeholder="What's the subtitle for this map?">
					</div>
					<label>Locations</label>
					<div class="panel panel-default">
						<div class="panel-heading">
							<div ng-hide="isAddingLocation">
								<span ng-hide="isEditing">
									<a class="btn btn-default btn-xs" ng-click="showAddlocation()"><i class="fa fa-plus"></i></a>
								<button
									class="btn btn-default btn-xs"
									ng-click="isEditing = true"
									ng-show="map.locations.length">
										<i class="fa fa-pencil" ></i>
									</button>
								</span>
								
								<button ng-show="isEditing" class="btn btn-primary btn-xs" ng-click="isEditing = false"><i class="fa fa-check"></i></button>
							</div>

							<!-- New Location form -->
							<div ng-show="isAddingLocation">
								<div class="form-group">
									<label class="control-label">Entity</label>
									<div ui-select2="locationSelectOptions" ng-model="location.entity" class="form-control"></div>
								</div>
								<!-- <div class="form-group">
									<label class="control-label" for="locationHeadline">
										Title
										<i class="fa fa-asterisk" style="font-size: 10px; color: red;"></i>
									</label>
									<input ng-model="location.headline" name="locationHeadline" type="text" class="form-control" id="locationHeadline" placeholder="Title" required>
								</div> -->
								<div class="form-group">
									<label class="control-label" for="yourcomments">Description</label>
									<textarea ng-model="location.text" name="comments" class="form-control" id="yourcomments" placeholder="Text"></textarea>
								</div>
								<!-- <div class="form-group">
									<label>
										locations
										<i class="fa fa-asterisk" style="font-size: 10px; color: red;"></i>
									</label>
									<div class="row">
										<div class="col-sm-6">
											<input type="text" class="form-control" placeholder="Start Year" ng-model="location.startlocation" required/>
										</div>
										<div class="col-sm-6">
											<input type="text" class="form-control" placeholder="End Year" ng-model="location.endlocation" required/>
										</div>
									</div>
								</div> -->
								
								<button type="submit" class="btn btn-primary btn-xs" ng-click="addlocation(location)">Add</button>
								<button class="btn btn-default btn-xs" ng-click="hideAddlocation()">Cancel</button>
							</div>
							<!-- /New location form -->
						</div>

						<ul class="list-group">
							<li class="list-group-item" ng-hide="map.locations.length || isAddingLocation">
								<span class="text-muted">No locations added. <a href ng-click="showAddlocation()">Add a location</a> to start your map.</span>
							</li>
							<li class="list-group-item list-group-item-default" ng-repeat="location in map.locations">
								<div class="media">
									<a class="pull-left" href="#/{{ location.entity.type }}/{{ location.entity.encodedUri }}">
									<img class="media-object img-responsive img-circle" ng-if="!location.entity.picture" ng-src="images/icon.png" style="display:block; width:32px">
									<img class="media-object img-responsive img-circle" ng-if="location.entity.picture" ng-src="{{ Uris.FILE_ROOT + location.entity.picture[Uris.QA_SYSTEM_LOCATION] }}" alt="{{ location.entity.name }}" style="width:32px">
									</a>
									<div class="media-body">
										<button ng-show="isEditing" class="btn btn-danger btn-xs pull-right" ng-click="removelocation(location)"><i class="fa fa-trash-o"></i></button>
										<p>{{ location.headline }}</p>
										<p>
										{{ location.startlocation }} <span ng-show="location.endlocation">- {{ location.endlocation }}</span>
										</p>
									</div>
								</div>
							</li>
						</ul>
					</div>
					<!-- <button type="submit" class="btn btn-primary" ng-click="add()">Create</button> -->
				</form>
			</div>
			<div class="col-md-6">
				<div ui-map="myMap" class="map-canvas map"
					ui-options="mapOptions">
				</div>
				<div class="panel panel-default">
					<div class="panel-body">
						<h2>{{ map.headline }}</h2>
						<small>{{ map.subtitle }}</small>
						
					</div>
				</div>
			</div>
		</div>
		
		<div class="row">
			<div class="col-md-6 col-md-offset-3">
			</div>
			<div class="col-md-6">
				<div ng-hide="isNew && !shortUrl" style="margin-bottom: 10px;">
					<h5>
					Share URL
					<i class="fa fa-refresh fa-spin" ng-show="!shortUrl"></i>
					</h5>
					<input type="text" ng-model="shortUrl" class="form-control" ng-show="shortUrl">
				</div>
			</div>
		</div>
	</div>
</div>